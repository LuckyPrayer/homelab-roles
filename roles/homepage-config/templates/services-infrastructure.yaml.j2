---
# Homepage Services - Infrastructure Dashboard
# Auto-generated by Ansible for {{ inventory_hostname }}

- Network & DNS:
    - Pi-hole:
        icon: pi-hole
        href: https://hermes-{{ homepage_env }}.local/admin
        description: DNS ad-blocker & local DNS
        siteMonitor: http://{{ hostvars['hermes-' + homepage_env].ansible_host | default('192.168.68.10') }}:8080
        statusStyle: dot

    - Traefik (Router):
        icon: traefik
        href: https://traefik.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Reverse proxy on hermes-{{ homepage_env }}
        siteMonitor: http://{{ hostvars['hermes-' + homepage_env].ansible_host | default('192.168.68.10') }}:8080/api/version
        statusStyle: dot

{% if 'orion-' + homepage_env in groups['docker_hosts'] | default([]) %}
    - Traefik (Orion):
        icon: traefik
        href: https://traefik.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Internal proxy on orion-{{ homepage_env }}
        siteMonitor: http://{{ hostvars['orion-' + homepage_env].ansible_host | default('192.168.20.100') }}:8080/api/version
        statusStyle: dot
{% endif %}

- Container Management:
    - Komodo:
        icon: sh-komodo
        href: https://komodo.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Container orchestration & monitoring
        siteMonitor: http://{{ hostvars[inventory_hostname].ansible_host | default('192.168.20.200') }}:9120
        statusStyle: dot

    - Harbor:
        icon: harbor
        href: https://harbor.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Container registry
        siteMonitor: http://{{ hostvars[inventory_hostname].ansible_host | default('192.168.20.200') }}:8082/api/v2.0/systeminfo
        statusStyle: dot

{% if 'pharos-' + homepage_env in groups['docker_hosts'] | default([]) %}
    - Uptime Kuma:
        icon: uptime-kuma
        href: https://status.{{ homepage_env }}.{{ homepage_base_domain }}
        description: External availability monitoring
        siteMonitor: http://{{ hostvars['pharos-' + homepage_env].ansible_host | default('192.168.20.150') }}:3001
        statusStyle: dot
{% endif %}

- Monitoring:
{% if 'argus-' + homepage_env in groups['docker_hosts'] | default([]) %}
    - Grafana:
        icon: grafana
        href: https://grafana.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Dashboards & visualization
        siteMonitor: http://{{ hostvars['argus-' + homepage_env].ansible_host | default('192.168.20.50') }}:3000/api/health
        statusStyle: dot

    - Prometheus:
        icon: prometheus
        href: https://prometheus.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Metrics collection
        siteMonitor: http://{{ hostvars['argus-' + homepage_env].ansible_host | default('192.168.20.50') }}:9090/-/healthy
        statusStyle: dot

    - Alertmanager:
        icon: alertmanager
        href: https://alertmanager.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Alert routing & notifications
        siteMonitor: http://{{ hostvars['argus-' + homepage_env].ansible_host | default('192.168.20.50') }}:9093/-/healthy
        statusStyle: dot
{% endif %}

- Storage & Backup:
{% if 'atlas-' + homepage_env in groups['docker_hosts'] | default([]) %}
    - Backrest:
        icon: sh-backrest
        href: https://backrest.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Backup management (B2 offsite)
        siteMonitor: http://{{ hostvars['atlas-' + homepage_env].ansible_host | default('192.168.20.250') }}:9898
        statusStyle: dot
{% endif %}

- Documentation:
    - Homelab Docs:
        icon: mdi-book-open-variant
        href: https://docs.{{ homepage_env }}.{{ homepage_base_domain }}
        description: Internal documentation (MkDocs)
        siteMonitor: http://{{ hostvars[inventory_hostname].ansible_host | default('192.168.20.200') }}:8081
        statusStyle: dot
